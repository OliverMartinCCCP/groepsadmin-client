<!-- Panel header -->
<div class="panel-heading clearfix">
  <div class="pull-left">
    <a class="btn btn-default btn-toggle" ng-init="isFilterCollapsed = true " ng-class="{ 'active' : !isFilterCollapsed }" href ng-click="isFilterCollapsed = !isFilterCollapsed"><span class="glyphicon glyphicon-filter"></span>&nbsp; Filter</a>

    <!-- Single button -->
    <div class="btn-group selectpicker" uib-dropdown is-open="status.isopen">
      <button id="single-button" type="button" class="btn btn-primary" uib-dropdown-toggle ng-disabled="disabled">
        Opgeslagen filters <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
        <li ng-if="!(filters.length > 0)">Geen filters</li>
        <li role="menuitem" ng-repeat="filter in filters | orderBy:'naam'"><a href ng-click="setFilter(filter)">{{ filter.naam }}</a></li>
      </ul>
    </div>

    <button class="btn btn-default" ng-init="showSaveOptions = false" ng-click="showSaveOptions = !showSaveOptions" ng-hide="showSaveOptions || currentFilter.name"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span></button>
    <form ng-show="showSaveOptions" class="form-inline">
      <input type="text" placeholder="Naam van de filter" class="form-control">
      <select class="selectpicker" title="Beschikbaar voor" ng-model="currentFilter" >
        <option>Groep x</option>
      </select>
      <button class="btn btn-default" ng-init="showSaveOptions = false"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span></button>
    </form>
  </div>

  <div class="pull-right">
    <!-- <a href="#/lid/toevoegen" class="btn-minimal"><span class="glyphicon glyphicon-plus"></span>&nbsp; Nieuw lid toevoegen</a> -->
    <a class="btn-minimal" href="https://groepsadmin.scoutsengidsenvlaanderen.be/groepsadmin/src.14.afdrukken_downloaden.jsp" target="_blank"><span class="glyphicon glyphicon-share-alt"></span>&nbsp; Exporteren</a>
  </div>
</div>

<div class="panel-filter row-fluid clearfix collapse" uib-collapse="isFilterCollapsed">
  <div ng-if="isLoadingFilters" class="loading-filter-container">
    <i class="fa fa-spinner fa-pulse"></i>&nbsp;Filtercriteria aan het laden...
  </div>
  <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xxs-12"
  ng-repeat="criterium in criteria | filter:{activated:true} | orderBy:'title'"
  ng-if="!isLoadingFilters">
    <!-- Filter options/criteria -->
    <div class="btn-group filter-option" uib-dropdown keyboard-nav="true" auto-close="disabled">
      <button type="button" class="btn btn-filter dropdown-toggle" uib-dropdown-toggle>
        <span class="filter-option-title">{{ criterium.title }}</span>
        <span class="filter-option-subtitle">
          <span ng-repeat="criteriumItem in criterium.items | filter:{activated:true} | orderBy:'label' | limitTo : 3">
             {{ criteriumItem.label }}
             <span ng-if="!$last">,</span>
          </span>
          <span>{{ getCriteriumSubtitleSuffix(criterium) }}</span>
        </span>
        <a ng-click="criterium.activated = false" class="filter-option-close"><span class="glyphicon glyphicon-remove"></span></a>
      </button>

      <div class="dropdown-menu" uib-dropdown-menu>
        <!-- New checkbox-->
        <div class="control-group">
          <label
            ng-if="criterium.multiplePossible"
            ng-repeat="criteriumItem in criterium.items | orderBy:'label'"
            class="control control--checkbox">
            {{ criteriumItem.label }}
            <input type="checkbox" ng-click="toggleCriteriumItem(criteriumItem,'checkbox')" ng-checked="criteriumItem.activated"/>
            <div class="control__indicator"></div>
          </label>

          <label
            ng-if="!criterium.multiplePossible"
            ng-repeat="criteriumItem in criterium.items | orderBy:'label'"
            class="control control--radio">
            {{ criteriumItem.label }}
            <input type="checkbox" ng-click="toggleCriteriumItem(criteriumItem,'radio',criterium.items)" ng-checked="criteriumItem.activated">
            <div class="control__indicator"></div>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- Filter options/criteria toevoegen-->
  <div class="btn-group"
  ng-hide="isAllCriteriaActive()"
  ng-if="!isLoadingFilters">
    <button type="button" ng-click="addLastCriteriumIfThereIsOnlyOneLeft()" class="btn btn-filter dropdown-toggle" data-toggle="dropdown" title="Filtercriteria toevoegen">
      <span class="glyphicon glyphicon-plus"></span>
      <span class="hidden-label">Filtercriteria toevoegen</span>
    </button>
    <ul class="dropdown-menu">
      <li ng-repeat="criterium in criteria | filter : { activated : false} | orderBy:'title'">
        <a ng-click="criterium.activated = true">{{ criterium.title }}</a>
      </li>
    </ul>
  </div>

  <div class="pull-right col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xxs-12" ng-show="!isLoadingFilters">
    <div class="btn-group filter-option">
      <button type="button" ng-click="applyFilter()" class="btn btn-apply" title="Criteria toepassen">
        <span class="glyphicon glyphicon-ok"></span>
        <span class="hidden-label">Criteria toepassen</span>
      </button>
    </div>
  </div>
</div>

<!-- Table -->
<table id="leden" class="table table-responsive table-hover" infinite-scroll="nextPage()" infinite-scroll-disabled="(busy || end )" infinite-scroll-distance="1" infinite-scroll-immediate-check="true">
  <thead>
    <tr class="sortable">
      <th ng-repeat="kolom in currentFilter.kolommen" id="kolom.label">{{ kolom.label }}
      <i class="fa fa-sort-alpha-asc sort" ng-class="{'first-sort' : sortering(kolom.id, true) == 1, 'second-sort' : sortering(kolom.id, true) == 2, 'third-sort' : sortering(kolom.id, true) == 3 }" aria-hidden="true" ng-click="addSort(kolom.id, true)"></i>
      <i class="fa fa-sort-alpha-desc sort" ng-class="{'first-sort' : sortering(kolom.id, false) == 1, 'second-sort' : sortering(kolom.id, false) == 2, 'third-sort' : sortering(kolom.id, false) == 3 }" aria-hidden="true" ng-click="addSort(kolom.id, false)"></i></th>
      <th class="sortable-disabled" uib-dropdown keyboard-nav="true" auto-close="disabled">
        <i class="fa fa-table dropdown-toggle"  aria-hidden="true" uib-dropdown-toggle></i>
        <ul class="dropdown-menu pull-right checklist" uib-dropdown-menu>
          <li ng-repeat="kolom in kolommen">
            <label>
              <input type="checkbox" ng-checked="kolomInFilter(kolom)" ng-click="changeKolomInFilter(kolom)" title="{{ kolom.beschrijving }}">{{ kolom.label }}
            </label>
          </li>
        </ul>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr  ng-repeat="lid in leden" ga-lid="{{lid.id}}" ng-init="meerLaden($last)" >
      <td ng-repeat="kolom in currentFilter.kolommen">
        <div class="fade-in slide-in">{{lid.waarden[kolom.id]}}</div>
      </td>
      <td class="t-caret" role="button"><span class="caret"></span></td>
    </tr>
  </tbody>
</table>
<footer class="panel-footer clearfix" in-view="test($inview)">
  <div ng-show='busy && !end ' class="loading" in-view="test($inview)"><i class="fa fa-spinner fa-pulse"></i>Leden aan het ophalen... </div>
</footer>


<!-- Panel footer -->
<!--
<footer class="panel-footer clearfix">
  <small class="pagination-info pull-left">{{ offset + 1 }} tot {{ offset + aantalPerPagina }} van {{ totaalAantalLeden }}</small>
  <ul class="pagination pull-right" >
    <li><a href="#">«</a></li>
    <li><a href="#">1</a></li>
    <li><a href="#">2</a></li>
    <li><a href="#">3</a></li>
    <li><a href="#">4</a></li>
    <li><a href="#">5</a></li>
    <li><a href="#">»</a></li>
  </ul>
</footer>
-->
